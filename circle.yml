machine:
  pre:
dependencies:
  pre:
    - mkdir -p ~/assets/binmaps/
    - find  ~/assets/
    - sudo apt-get update
#    - wget -c -O ~/assets/cov-analysis-linux64-7.6.0.tar.gz http://sd-55475.dedibox.fr/cov-analysis-linux64-7.6.0.tar.gz
#    - wget -c -O ~/assets/california-latest.osm.bz2 http://download.geofabrik.de/north-america/us/california-latest.osm.bz2
#    - wget -c -O ~/assets/netherlands-latest.osm.bz2 http://download.geofabrik.de/europe/netherlands-latest.osm.bz2
#    - wget -c -O ~/planet-150202.osm.bz2 ftp://ftp.spline.de/pub/openstreetmap/planet/2015/planet-150202.osm.bz2
#    - sudo apt-get upgrade
    - sudo apt-get install cmake 
#    - sudo apt-get install zlib1g-dev
    - sudo apt-get install libpng12-dev 
    - sudo apt-get install libgtk2.0-dev 
    - sudo apt-get install librsvg2-bin 
    - sudo apt-get install g++
    - ls 
    - ls navit
    - bash ~/navit/build.sh
  cache_directories:
    - "~/assets/"
test:
  post:
    - ls
    - pwd
#    - bzcat  ~/assets/california-latest.osm.bz2 | ./bin/navit/maptool/maptool  ~/assets/binmaps/california-latest.bin
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 1 -e 1 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 2 -e 2 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 3 -e 3 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 4 -e 4 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 5 -e 5 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 6 -e 6 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 7 -e 7 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 8 -e 8 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 9 -e 9 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 10 -e 10 ~/binmaps/planet-150202.bin 
    - bzcat  ~/planet-150202.osm.bz2 | ./bin/navit/maptool/maptool -s 11 ~/binmaps/planet-150202.bin 
#    - bash maptool.sh
general:
  artifacts:
    - "~/assets/binmaps/"
